# 计算机系统结构 实验报告

计54 马子轩

## 实验目的

深入理解各种不同的 Cache 替换策略

理解学习不同替换策略对程序运行性能的影响

动手实现自己的 Cache 替换策略

## 策略分析

### LRU

Least Recently Used

每次miss的时候替换最不经常被使用的。实现上就是，实现一个队列，每次hit的时候把该项移动到最前面，miss的时候替换最后面的项目。

### Random

顾名思义，就是miss的时候随机选取一个进行替换

### Clock

LRU中，hit时需要进行扫描，为了减少开销，构造循环链表，命中的时候，置1。miss的时候顺序扫描，如果是1，置0，如果是0，替换。这种方式就能够减少扫描的开销。

### LIRS

根据hit间隔，来判断该cache块的访问频率，优先替换访问频率不高的块。具体实现就是，存放两个队列，一个用来存放低频块，一个用来存放所有块。hit的时候，如果在低频队列中，从低频队列中取出，加入总队列，同时从总队列中pop一个加入低频队列。如果不在低频队列中，直接取出，push进总队列。miss的时候，pop低频队列进行替换。

### 策略比较

LIRS相比LRU更多的考虑了访问频率的问题，在某些情况下性能更优。

考虑到cache替换策略是需要硬件实现的，而硬件中进行扫描比较，虽然速度较快，但是成本极高。所以LRU和LIRS这两种算法虽然性能比较好，但是在路比较多的时候成本较高。而clock性能虽然有所下降，但是成本较低。